## 主扫

案例

线上：微信，支付宝。

线下：待补充。

- 场景介绍

- 微信

```text
步骤1：商户根据第三方支付的规则，为不同的商品生成不同的二维码，展示在各种场景，用于用户扫描购买。
步骤2：用户使用第三方支付“扫一扫”，扫描二维码后，获取商品支付信息，引导用户完成支付。
步骤3：用户确认支付，输入支付密码
步骤4：支付完成后会提示用户支付成功，商户后台得到支付成功的通知，进行后续处理，如发货。
 ```
- 支付宝

 ```text
步骤1：商户根据支付宝的支付规则，为不同的商品生成不同的二维码，展示在各种场景，用于用户扫描购买。
步骤2：用户使用支付宝“扫一扫”，扫描二维码后，获取商品支付信息，引导用户完成支付。
步骤3：用户确认支付，输入支付密码，支付完成后会提示用户支付成功，商户后台得到支付成功的通知，进行后续处理，如发货。
 ```

- 时序图
  <img src="images/zszflct.png" alt="" style="width: 900px"  />


业务流程说明

1. 商户后台系统根据用户选购的商品生成订单。
- 用户确认支付后调用汇收银 【统一下单API】生成预支付交易；
- 汇收银收到请求后生成预支付交易单，并返回交易会话的二维码链接code_url。
- 商户后台系统根据返回的code_url生成二维码。
- 用户打开微信“扫一扫”扫描二维码，微信客户端将扫码内容发送到微信支付系统。
- 微信支付系统收到客户端请求，验证链接有效性后发起用户支付，要求用户授权。
- 用户在微信客户端输入密码，确认支付后，微信客户端提交授权。
- 微信支付系统根据用户授权完成支付交易。
- 微信支付系统完成支付交易后给汇收银返回交易结果，并将交易结果通过短信、微信消息提示用户。微信客户端展示支付交易结果页面。


## 被扫

案例

线上：微信，支付宝。

线下：待补充。

- 场景介绍

- 微信

以下的截图以微信作为第三方为例。
 ```text
步骤1：商户根据第三方支付的规则，生成订单及支付信息（如图3.1）；
步骤2：用户点开微信“钱包”点击“付款”（如图3.2）；
步骤3：用户将“付款码”界面对准商户扫描设备，完成支付（若未开启免密情况，需要用户输入密码完成支付）；
步骤4：支付完成后会提示用户支付成功，商户后台得到支付成功的通知；
```
 - 支付宝
 ```text
步骤1：商户根据支付宝的支付规则，生成订单及支付信息；
步骤2：用户点开支付宝点击“付款”（如图3.1）；
步骤3：用户将“付款码”界面对准商户扫描设备，完成支付；
步骤4：支付完成后会提示用户支付成功，商户后台得到支付成功的通知,用户也会得到支付成功的消息（如图3.2）；
 ```

 - 时序图
 <img src="images/bszflct.png" alt="" style="width: 900px"  />



## 使用场景

场景介绍
目前支持的微信、支付宝、QQ钱包、京东钱包的支付场景如下所示。我们后续将继续完善支付功能。只要付款方打开客户端，
通过客户端发起或受理的支付方式均支持。从第三方应用或其他网站跳转至付款方客户端的方式暂不支持

```text
面对面条码被扫支付（付款人生成付款码被扫）
说明: 商户使用扫码枪或者其他扫码设备扫描付款人的付款码进行收款操作，适用于大型商场、便利店等小额高频的移动手机便捷支付。
应用场景：非常广泛
应用案例：KFC、华联线下实体店等

适用于线下

```



```text
面对面店铺二维码主扫（静态二维码生成平台）
说明：付款人使用客户端“扫一扫”，扫描商户柜台摆放的民生二维码收银台进行主动付款，二维码为静态收款码，需要付款人输入支付金额并进行付款，适用于面对面手机快捷支付。
应用场景：非常广泛
应用案例：小型药店、小型超市便利店等

适用于线下

```

```text
订单二维码主扫（付款人主动扫描商家实时生成的带支付金额的二维码）
说明：付款人使用客户端“扫一扫”扫描商户端生成的二维码进行主动付款，二维码为实时生成且带商品及支付金额信息，适用于面对面手机快捷支付。
应用场景：适用于PC端网站或者装有能显示二维码的POS机，显示屏的商户，自助售货机等
应用案例：游戏充值PC网站，机场自助售货机等

线上、线下都适用

```

```text
APP支付（商户APP集成第三方支付系统SDK）
说明：适用于商户在移动端APP中集成微信、支付宝、QQ钱包、京东钱包等第三方支付功能。商户APP调用SDK唤起第三方支付模块，商户APP会跳转到第三方支付系统中完成支付，支付完后跳回到商户APP内，最后展示支付结果。
应用场景：
应用案例：

适用于线上

```